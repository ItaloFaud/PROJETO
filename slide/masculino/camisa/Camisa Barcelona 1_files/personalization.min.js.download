"use strict";!function(){function o(){try{return document.querySelector(s)}catch(o){return console.error("personalization.personalization.getToggleButton",o),null}}function n(){try{return document.querySelector(u)}catch(o){return console.error("personalization.personalization.getToggleButton",o),null}}function e(){try{c=o(),d=n(),p?(l.addClass(c,"personalization__toggle-button--opened"),l.addClass(d,"personalization__content--opened"),window.freedom.nsPubSub.pub("personalization.open.after",{})):(l.removeClass(c,"personalization__toggle-button--opened"),l.removeClass(d,"personalization__content--opened"))}catch(e){console.error("personalization.personalization.setFormDom",e)}}function t(){try{p=!p,window.freedom.nsPubSub.pub("personalization.form.changeOpenClosed",p),e(),a()}catch(o){console.error("personalization.personalization.toggleFormPersona",o)}}function r(o){try{return window.freedom.i18n.getMessage(o)}catch(n){return console.error("personalization.get.i18n.message",n),null}}function a(){try{var o=document.querySelector(".buy-button-now span");o&&(p&&f&&m()?(o.textContent=r("call_to_action_personalization"),window.freedom.nsPubSub.pub("personalization.form.toggleStatus",!0)):(o.textContent=r("call_to_action"),window.freedom.nsPubSub.pub("personalization.form.toggleStatus",!1)))}catch(n){console.error("personalization.form.handleCallToActionText")}}function i(o){f=o,a()}var l=window.freedom,s=".personalization__toggle-button",u=".personalization__content",c=null,d=null,p=!1,f=!1,m=function(){var o=!1;try{o=!!document.querySelector("[data-persona]")}catch(n){o=!1,console.error("personalization.checkIfHasPersonaForm",n)}finally{return o}};window.freedom.nsPubSub.sub("personalization.form.validate.changed",i),window.freedom.nsPubSub.sub("color-flavor-size.changeHtml.after",e),window.freedom.nsPubSub.sub("color-flavor-size.changeHtml.after",a),l.live(s,"click",t)}();