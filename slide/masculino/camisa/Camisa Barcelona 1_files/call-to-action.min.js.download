"use strict";!function(){function e(e){return""!==e.trim()}function o(e,o){o?u(e):(S=e,n()),c()}function r(e){if(!e)return void s(document.querySelector(y).getAttribute("data-size-invalid"));var r=document.querySelector("[data-persona]"),t=document.querySelector("[data-builder-persona]"),n=q.getState().pdp.persona.selected;p=e,t?window.freedom.nsPubSub.pub("builder.personalization.get",o):r?window.freedom.nsPubSub.pub("personalization.get",o):n&&n.state?o(n.list,!0):o(void 0)}function t(){window.freedom.nsPubSub.pub("ColorFlavorSize.select.size",r)}function n(){if(S){var o=[];S.name&&""!==S.name&&e(S.name)&&o.push({sku:S.nameSku,value:S.name}),S.number&&""!==S.number&&o.push({sku:S.numberSku,value:S.number}),v=o}}function u(e){try{v=e}catch(o){console.error("call-to-action.buildPersonaList",o)}}function a(){try{var e=document.querySelector(y).getAttribute("data-seller");return e?+e:(e=document.querySelector("[product-data-seller]").getAttribute("product-data-seller"),e?+e:0)}catch(o){return console.error("call-to-action.getSeller",o),0}}function i(){return 0===a()?v:[]}function c(){var e={items:[{sku:p,quantity:h,seller:a(),personalizations:i()}]};l(e)}function d(e){if(e.data.errors&&e.data.errors.length>0){var o="data-error",r=null;e.data.errors[0].code===g&&(o="data-error-"+g),"personalization.not.allowed"===e.data.errors[0].code&&(r=window.freedom.i18n.getMessage("product_errors_cart_persona_not_allow"));var t=document.querySelectorAll(y);if(t)for(var n=t.length;n--;)s(r||t[n].getAttribute(o))}else window.freedom.nsPubSub.pub("quickView.hasQuickView")?(window.freedom.nsPubSub.pub("quickView.close"),window.freedom.nsPubSub.pub("miniCart.fixed")):window.location.href="/cart"}function l(e){var o={buttonWithLoading:document.querySelector(y),method:"post",data:e,success:function(e){d(e)},error:function(){s(document.querySelector(y).getAttribute("data-error"))}};window.freedom.restClient.request("/cart/add",o)}function s(e){try{var o=document.querySelectorAll("#buy-error");if(o)for(var r=o.length;r--;)o[r].innerHTML=e,window.freedom.removeClass(o[r],"hidden")}catch(t){console.error("call-to-action.showBuyError",t)}}function b(e){try{if(e)t();else{var o=window.freedom.i18n.getMessage("personalization_fields_generic_error");s(o)}}catch(r){console.error("call-to-action.checkPersona",r),t()}}function f(){try{var e=document.querySelector("[data-persona]"),o=document.querySelector("[data-new-persona]"),r=document.querySelector("[data-builder-persona]");e&&o&&!r?window.freedom.nsPubSub.pub("ColorFlavorSize.handleBuyEvent.checkPersona",b):t()}catch(n){console.error("call-to-action.handleBuyEvent",n)}}function m(){window.freedom.live(".buy-button-now","click",f)}function w(e){try{var o=document.querySelector("#buy-button-wrapper.main-buy-button-now");o&&(e?window.freedom.addClass(o,"hide"):window.freedom.removeClass(o,"hide"))}catch(r){console.error("call-to-action.hideOrShowMainBuyButton",r)}}var S,p,y=".buy-button-now",v=[],h=1,g="item.stock.unavailable",q=window.freedom.NsStore;!function(){m(),window.freedom.nsPubSub.sub("callToAction.restart",m),window.freedom.nsPubSub.sub("callToAction.hide.main-button",w)}()}();