"use strict";!function(){function e(e){g=document.querySelector(f).closest(".size-chart"),w.pub("nsLoading."+e,document.querySelector("body")),w.pub("spin.loading.animate",g,e)}function t(){w.pub("modal.restart"),w.pub("SlidePush.toggle",S,!0),w.pub("modal.toggle",E,!0)}function n(n){var r=document.createElement("div");if(document.body.appendChild(r),window.freedom.addClass(r,"size-chart-wrapper"),"string"==typeof n){var a=document.querySelector(v);r.innerHTML=n,a.innerHTML="",a.appendChild(r),t()}e("hide"),c()}function r(){var e=document.getElementById("size-chart-table");e.innerHTML=""}function a(e){r();var t=document.getElementById("size-chart-table"),n=e.target.options[e.target.selectedIndex],a=n&&n.getAttribute("data-types")&&JSON.parse(n.getAttribute("data-types"));a=a||[],t.appendChild(l(a))}function o(e){d(),r();var t=e.target.options[e.target.selectedIndex],n=t&&t.getAttribute("data-categories")&&JSON.parse(t.getAttribute("data-categories"));n=n||[];for(var a=0;a<n.length;a++){var o=n[a],c=document.createElement("option");c.value=o.name,c.text=o.name,window.freedom.setDataAttribute(c,"data-types",JSON.stringify(o.types)),document.getElementById("size-chart-category").add(c)}}function d(){var e=document.getElementById("size-chart-category"),t=e.options[0];e.innerHTML="",e.add(t)}function c(){var e=document.querySelector('[data-slide-push-close="'+S+'"]');e&&e.addEventListener("click",function(){w.pub("SlidePush.toggle",S,!1)});var t=document.querySelector('[data-modal-close="'+E+'"]');t&&t.addEventListener("click",function(){w.pub("modal.toggle",E,!1)}),document.querySelector(y)&&window.freedom.addEvent("change",document.querySelector(y),o),document.querySelector(b)&&window.freedom.addEvent("change",document.querySelector(b),a),i()}function i(){var e=document.querySelector(y);p&&(e.value=p),!e.value&&h&&(e.value=h),""===e.value&&(e.selectedIndex=0),o({target:e})}function u(e,t){if(e&&e.length>0)for(var n=e.length,r=e[0],a=0;a<r.length;a++){for(var o=document.createElement("tr"),d=0;d<n;d++){var c=document.createElement("td");try{c.innerHTML=e[d][a]}catch(i){}o.appendChild(c)}t.appendChild(o)}}function l(e){for(var t=document.createElement("table"),n=document.createElement("tr"),r=[],a=0;a<e.length;a++){var o=e[a],d=document.createElement("th");d.innerHTML=o.name,r.push(o.values),n.appendChild(d)}return t.appendChild(n),u(r,t),t}function s(r){r.preventDefault(),p=r.currentTarget.getAttribute("data-selected"),h=r.currentTarget.getAttribute("data-others"),""===document.querySelector(v).innerHTML?(e("show"),window.freedom.restClient.request("/refactoring/catalog/sizes",{method:"get",type:"html",complete:n})):t(!0)}function m(){if(document.querySelector(f)){var e=window.freedom.nodeListToArray(document.querySelectorAll(f));e.forEach(function(e){e.addEventListener("click",s)})}}var g,p,h,f="[data-size-chart-load]",v="[data-size-chart-content]",y="[data-size-chart-brand]",b="[data-size-chart-category]",S="size-chart-slide",E="size-chart-modal",w=window.freedom.nsPubSub;!function(){m(),w.sub("sizeChart.restart",m)}()}();