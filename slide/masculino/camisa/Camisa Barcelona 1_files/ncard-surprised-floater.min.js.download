"use strict";!function(){function e(){if(t&&a){var e=a.getBoundingClientRect().top;e<-40?t.className.indexOf("ncard-surprised-floater-short")<0&&(t.className="ncard-surprised-floater ncard-surprised-floater-short"):t.className.indexOf("ncard-surprised-floater-short")>=0&&(t.className="ncard-surprised-floater")}}function r(){window.freedom.nsPubSub.pub("ncard.opensea.init.floater"),t=document.querySelector("[data-ncard-surprised-floater]"),window.freedom.addClass(t,"hide")}function o(){if(t=document.querySelector("[data-ncard-surprised-floater]"),a=document.getElementsByTagName("body")[0],window.freedom.nsPubSub.pub("ncard.surprised.hide.opensea"),t){if(window.freedom.cookie&&window.freedom.cookie.get("uname")){i=decodeURIComponent(window.freedom.cookie.get("uname"));var r=t.querySelector(".floater-holder .floater-headers .floater-title-name .ncard-name");r&&(r.innerHTML=i),window.freedom.removeClass(t,"hide"),window.addEventListener("scroll",e)}window.freedom.nsPubSub.pub("nCard.floater.open")}}function d(){var e={method:"post",type:"json",success:function(e){e&&n(!1)},error:function(){window.freedom.nsPubSub.pub("ncard.opensea.init.floater")}};window.freedom.restClient.request("/ncard/proposal/pre-approved",e)}function n(e){window.freedom.cookie&&window.freedom.cookie.get("uname")&&(window.freedom.cookie.get("ncard_surprised")?window.freedom.cookie.get("ncard_surprised")===!0||"true"===window.freedom.cookie.get("ncard_surprised")?o():r():e&&d());var n=document.querySelector("[data-ncard-surprised-floater]").querySelector(".floater-buttons .floater-close-action");n.addEventListener("click",s)}function s(){t=document.querySelector("[data-ncard-surprised-floater]"),t&&(window.freedom.addClass(t,"hide"),window.removeEventListener("scroll",e));var r={method:"put",type:"json"};window.freedom.restClient.request("ncard/proposal/pre-approved-refused",r),window.freedom.nsPubSub.pub("nCard.floater.close")}var t,a,i;!function(){n(!0),window.freedom.nsPubSub.sub("ncard.surprised.floater.show",o),window.freedom.nsPubSub.sub("ncard.surprised.floater.close",s),window.freedom.nsPubSub.sub("ncard.surprised.status",d)}()}();