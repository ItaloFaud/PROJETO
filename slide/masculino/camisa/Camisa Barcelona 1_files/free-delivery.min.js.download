"use strict";!function(){var e=document.querySelector.bind(document),o=window.freedom.nsPubSub,l="data-link-rules",t=".rules-page",n={container:".freeDelivery-container",modal:".freeDelivery-modal",modal_content:".modal-content",gif:".freeDelivery-gif",close:".modal-close"},i={init:function(){this.events.openModalRules()},helpers:{checkLink:function(){var o=e(n.container).getAttribute(l);null!==o&&""!==o&&i.events.getAjax(o)},hideAll:function(){var e=document.querySelectorAll(".rules-content > article");e.forEach(function(e){e.classList.add("hide")})},showFreeDelivery:function(){document.querySelector('#comboreg [value="frete-gratis"]').selected=!0,document.querySelector("#frete-gratis").classList.remove("hide")}},events:{getAjax:function(e){var o=e,l={displayLoading:!1,method:"get",success:function(e){var o=document.createElement("div");o.innerHTML=e;var l=o,n=l.querySelector(t);i.handlers.render(n)},error:function(){console.log("ERROR | FreeDelivery")}};window.freedom.restClient.request(o,l)},openModalRules:function(){window.freedom.live(n.gif,"click",function(){null!==e(t)?(e(n.modal).classList.remove("hide"),o.pub("overlay.display","show"),document.getElementById("frete-gratis").scrollIntoView(!0)):i.helpers.checkLink()})},closeModalRules:function(){window.freedom.live(n.close,"click",function(){e(n.modal).classList.add("hide"),o.pub("overlay.display","hide")}),window.freedom.live("#overlay","click",function(){e(n.modal).classList.add("hide")})},scrolling:function(){var o,l=e(n.modal).offsetHeight,i=e(t).offsetHeight;e(n.modal).onscroll=function(){l=e(n.modal).offsetHeight,i=e(t).offsetHeight,o=e(n.modal).scrollTop,o+l>i?e(".freeDelivery-modal .modal-top").classList.remove("scroll"):e(".freeDelivery-modal .modal-top").classList.add("scroll")}},changeSelected:function(){window.freedom.live("#comboreg","change",function(o){var l=o.target.value;i.helpers.hideAll(),document.getElementById(l).classList.remove("hide"),e(n.modal).scrollTop=0})}},handlers:{render:function(l){null!==l&&(e(n.modal_content).appendChild(l),i.events.closeModalRules(),i.events.scrolling(),window.freedom.isMobile?(e(n.container).classList.add("mb"),i.helpers.hideAll(),i.events.changeSelected(),i.helpers.showFreeDelivery(),e(n.modal).classList.remove("hide")):(o.pub("overlay.display","show"),e(n.modal).classList.remove("hide"),document.getElementById("frete-gratis").scrollIntoView(!0)))}}};try{i.init()}catch(r){console.error("ERROR | FreeDelivery"+r)}}();