"use strict";window.freedom.metadata=function(e,t){function a(e,t,a,r){m.page=e,m.key=t,m.src=a,m.meta=r,window.freedom.nsRequire.load("chaordic")}function r(e,t){h.push({key:e,src:t})}function n(e,t){t&&e&&t.length>1&&t[1].hasOwnProperty("items")&&(e.cart.items=t[1].items)}function o(e,t,a){if(e&&e.chaordic){if(e.chaordic.page){var r=document.querySelector("section.search-result");if(r){var n=window.freedom.getDataAttribute(r,"search-id");e.chaordic.page.info||(e.chaordic.page.info={}),e.chaordic.page.info.searchId=n}}e.chaordic.search&&e.chaordic.search.items&&0===e.chaordic.search.items.length&&(delete e.chaordic.search.items,e.chaordic.page&&e.chaordic.page.name&&(e.chaordic.page.name="emptySearch"))}window.chaordic_meta=e.chaordic;var o=document.querySelectorAll("head script")[0],i=document.createElement("script");i.async=!0,i.defer=!0,e.chaordic&&e.chaordic.dataGroup&&i.setAttribute("data-group",e.chaordic.dataGroup),i.setAttribute("data-apikey",t),i.src=a,o.parentNode.insertBefore(i,o)}function i(e,t,a){if(window.dataLayer){var r=document.querySelector("body");if(r){var n=document.createElement("script");n.async=!0,n.defer=!0,n.src=a+"/gtm.js?l=dataLayer&id="+t,r.parentNode.insertBefore(n,r),window.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"}),window.dataLayer.push(e.gtm),window.dataLayer.push({event:"AjaxDL"}),window._ga("send","event","AjaxDL","AjaxDL","AjaxDL",0,{nonInteraction:1})}else setTimeout(function(){i(e,t,a)},10)}}function d(){return window.freedom.nsRequire.use("chaordic",function(){var e=y();e?b(e):window.freedom.restClient.request("/metadata",{method:"post",data:{page:m.page,pageData:m.meta},success:b})}),this}function c(){var e=document.getElementById("chaordic-update");if(e){var t=document.createElement("script");t.innerHTML=e.innerHTML;var a=document.getElementsByTagName("script")[0];a.insertBefore(t,a.firstChild),window.chaordicUpdate&&window.chaordic&&window.chaordic.push(window.chaordicUpdate)}}function s(){var e=document.getElementById("gtm-update");if(e){var t=document.createElement("script");t.innerHTML=e.innerHTML;var a=document.getElementsByTagName("script")[0];a.insertBefore(t,a.firstChild),window.gtmUpdate&&window.dataLayer&&(window.dataLayer.push(window.gtmUpdate),window.dataLayer.push({event:"AjaxDL"}),window._ga("send","event","AjaxDL","AjaxDL","AjaxDL",0,{nonInteraction:1}))}}function g(e){for(var t=0;t<e.length;t++){var a=e[t].mapping;if(window.innerWidth>=a[0][0]&&window.innerHeight>=a[0][1])return e[t]}return 0}function u(){for(var e=[],t=0;t<window.gptadslots.length;t++){var a=window.gptadslots[t],r=g(a.config);a.size!==r&&(a.size=r,e.push(a.slot))}e.length&&window.googletag.pubads().refresh(e)}function w(e,t){var a=document.createElement("script");a.async=!1,a.type="text/javascript";var r="https:"===document.location.protocol;a.src=(r?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n),window.googletag.cmd.push(function(){var a=window.freedom.hasClass(document.querySelector("html"),"desktop")?"desktop":"mobile";for(var r in e)if("carrousel"===r)w(e[r][a],"carrousel-");else{var n=e[r];t=t||"",window.gptadslots[t+r]={size:0,config:n};var o=window.googletag.defineSlot(n.slotId,[n.size],r);if(n.mapping){var i=n.mapping||[],d=window.googletag.sizeMapping();for(var c in i){var s=i[c];d.addSize(s[0],s[1])}o.defineSizeMapping(d.build());var g=n.targetings||{};for(var p in g)o.setTargeting(p,n.targetings[p]);window.gptadslots[t+r].slot=o.addService(window.googletag.pubads())}}window.freedom.addEvent("resize",window,u),window.googletag.pubads().enableSingleRequest(),window.googletag.pubads().enableAsyncRendering(),window.googletag.pubads().collapseEmptyDivs(!0),window.googletag.enableServices(),window.freedom.nsRequire.load("dfp-banner")})}window.googletag={cmd:[]},window.gptadslots={};var p,m={},h=[],l="ERROR: "+new Date,f=function(t){var a=e.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return a?a[2]:null},v=function(){var e,t,a="metadata_"+p+"_"+m.page,r=dataLayer[0];if("product"===m.page){try{e=JSON.parse(m.meta)}catch(n){e={product:{id:l}}}a="metadata_"+p+"_"+m.page+"_"+e.product.id}else if("search"===m.page){try{e=JSON.parse(m.meta)}catch(n){e={search:{query:l}}}t=e&&e.search&&e.search.query?e.search.query:r.friendly||r.query||l,a="metadata_"+p+"_"+m.page+"_"+t.replace(/ /g,"_")}return a},y=function(){return t.getAll(v())},L=function(e){t.set(v(),e,10)},b=function(e){try{L(e)}catch(t){}o(e,m.key,m.src),window.freedom.nsRequire.use("gtm",function(){for(var t=0;t<h.length;t++)i(e,h[t].key,h[t].src)})};return p=f("uuid"),{fetchUser:d,chaordic:a,gtm:r,chaordicPush:c,updateCartMetaChaordic:n,gtmPush:s,dfp:w}}(window.document,window.freedom.nsStorage).fetchUser(),window.freedom.nsRequire.load("metadata");