"use strict";window.freedom.nsValidate=function(e){function r(e,r){if(!(e&&e.length>0)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e&&e[r]?e[r]:e;for(var t=0,a=e.length;t<a;t++)if(e[t].checked)return e[t][r]}function t(r){freedom&&window.freedom.i18n&&window.freedom.i18n.messages?r(window.freedom.i18n.messages):e.warn("Freedom i18n validation messages not loaded")}function a(e){var r,t=Object.prototype.hasOwnProperty;for(r in h)t.call(h,r)&&e.setMessage(r,h[r])}function o(e){return w?void y.push(e):(w=!0,void t(function(r){if(g=!0,h=r,window.freedom.i18n.messages||(window.freedom.i18n.messages=r),e&&a(e),y.length>0)for(var t=y.length;t--;)a(y[t])}))}function n(e,r,t){var n=new FormValidator(e,r,t);return g||o(n),a(n),n}function d(e,r){var t=null,a=[];if(e.length>0)for(var o=0,n=e.length;o<n;o++){var d=e[o].element,i=d.dataset&&d.dataset.name?d.dataset.name:d.getAttribute("data-name"),l=d.dataset&&d.dataset.errorwrapper?d.dataset.errorwrapper:d.getAttribute("data-errorwrapper");d.classList.add(u.error),l&&(t=document.getElementById(l)),i&&e[o].message&&a.push(e[o].message.replace(e[o].name,i))}return r&&"function"==typeof r&&r(t,a),!1}function i(e){if(e)for(var r=e.elements,t=0,a=r.length;t<a;t++)"INPUT"===r[t].nodeName.toUpperCase()&&r[t].classList.remove(u.error);return!1}function l(e,r,t,a){for(var o="",n=window.freedom.isIe8&&a&&a.innerText?a.innerText:"",d=0,i=r.length;d<i;d++)o+='<div class="'+t+'">'+r[d]+"</div>";return e&&(e.innerHTML=o,a&&(window.freedom.isIe8&&(a.innerText=n),e.appendChild(a)),e.classList.add(u.show)),!1}function s(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function c(e){e&&(s(e.parentNode.querySelector("."+u.errorMessage)),window.freedom.removeClass(e.parentNode,u.error))}function f(e){if(e){for(var r=e.querySelectorAll("."+u.errorMessage),t=r.length;t--;)s(r[t]);for(var a=e.querySelectorAll("."+u.error),o=a.length;o--;)window.freedom.removeClass(a[o],u.error)}}function m(e,r){if(f(e),r.length>0)for(var t=r.length,a={};t--;){var o=r[t],n=o.element&&o.element.length>0?o.element[0]:o.element,d="OPTION"===n.nodeName.toUpperCase(),i=n.parentNode,l=n.closest(".tooltip-item"),s=o.message?o.message:"",c=b.cloneNode(!0),m=d?i:n,v=m.title?m.title:o.display,p=m.getAttribute("data-group");c.innerHTML=s.replace(o.name,v),n.parentNode.disabled||n.disabled?(window.freedom.removeClass(l,u.error),n.nextSibling&&0===n.nextSibling.className.indexOf("error-message")&&n.nextSibling.remove()):l&&!a[p]&&(p&&(a[p]=!0),l.appendChild(c),window.freedom.addClass(l,u.error))}return!1}function v(e,t){var a=e.form;e.errors=e.errors.filter(function(e){return e.name!==t.name}),!t.validator||t.validator.disabled||t.validator.readOnly||("radio"===t.type?t.validator.value=a[t.name]&&""!==a[t.name].value?a[t.name].value:void 0:t.validator.value=t.value,"radio"!==t.type&&"checkbox"!==t.type||(t.validator.checked=r(a[t.name],"checked")),t.validator.depends&&"function"==typeof t.validator.depends?t.validator.depends.call(e,t)&&e.validateField(t.validator):t.validator.depends&&"string"==typeof t.validator.depends&&e.conditionals[t.validator.depends]?e.conditionals[t.validator.depends].call(e,t.validator)&&e.validateField(t.validator):e.validateField(t.validator),m(a,e.errors))}function p(e){var t,a=e.form,o=Object.prototype.hasOwnProperty,n=function(r){v(e,r.target)},d=function(r){var t='[name="'+r.target.attributes.name.value+'"]:checked',a=!!document.querySelector(t);a&&v(e,r.target)},i=function(r){v(e,r.target)};for(t in e.fields)if(o.call(e.fields,t)){var l=e.fields[t],s=a[t];if(l.id=s?r(s,"id"):null,l.element=s,l.type=s&&s.length>0?s[0].type:s&&s.type||null,l.value=r(s,"value"),l.checked=r(s,"checked"),!s||"select-one"!==s.type&&"select-multiple"!==s.type||(l.type=s.type),!s||s.length&&"select-one"!==s.type&&"select-multiple"!==s.type){if(s){var c=s.length;if(c>0)for(;c--;)s[c].validator=l}}else s.validator=l;if(s){var f=s.length&&s.item,m=f&&"radio"===s.item(0).type;if(m)for(var p=0;p<s.length;p++){var u=s.item(p);window.freedom.addEvent("blur",u,d),window.freedom.addEvent("click",u,d)}else"checkbox"===s.type?window.freedom.addEvent("change",s,i):(window.freedom.addEvent("blur",s,n),window.freedom.addEvent("change",s,n))}}}var u={error:"error",errorMessage:"error-message",show:"show",ok:"ok",tooltip:"tooltip",wrapper:"tooltip-item"},w=!1,g=!1,h={},y=[],b=document.createElement("span");!function(){window.freedom.nsPubSub.sub("FormValidator.loaded",function(){FormValidator.prototype.validateField=function(e){this._validateField(e)},o(),window.freedom.addClass(b,u.errorMessage),window.freedom.addClass(b,u.tooltip),window.freedom.nsPubSub.pub("formValidationCore.loaded",{classList:u,validate:n,processElementsErrors:d,clearErrors:i,showMessages:l,getMessages:t,removeLabelError:s,showErrors:m,validateFieldsOnBlock:v,validateFieldsOnBlur:p,cleanField:c,clean:f})})}()}(console);