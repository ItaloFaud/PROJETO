"use strict";!function(){function e(e){var o="[builder-combo-content]";return o+='[builder-combo-step="'+e+'"]',document.querySelector(o)}function o(o){try{var r=e(o);window.freedom.removeClass(r,"active")}catch(t){console.error("builder-combo.closeStep",t)}}function r(r){try{var t=r.pdp.persona.builder.currStep;t>1&&m.stepOpened<t&&o(t-1),m.stepOpened>t&&o(t+1),m.stepOpened=t;var c=e(t);window.freedom.addClass(c,"active")}catch(n){console.error("builder-combo.openCurrentyStep",n)}}function t(){try{var e=document.querySelectorAll(i),o=e.length;for(e.length>0&&(m.steps=[]);o--;)m.steps.push({value:e[o].value,step:e[o].getAttribute(a)})}catch(r){console.error("builder-combo.saveState",r)}}function c(){try{for(var e=m.steps.length;e--;)n(m.steps[e].step,m.steps[e].value),d(m.steps[e].value,m.steps[e].step)}catch(o){console.error("builder-combo.restoreState",o)}}function n(e,o){try{var r=i;r+='[builder-combo-step="'+e+'"]',r+=' option[value="'+o+'"]';var t=document.querySelector(r);t&&(t.selected=!0)}catch(c){console.error("builder-combo.setComboValue",c)}}function u(e){try{var o="[builder-combo-item]";o+='[builder-combo-step="'+e+'"]',o+=":not(.hide)";var r=document.querySelector(o);window.freedom.addClass(r,"hide")}catch(t){console.error("builder-combo.hideShowedItems",t)}}function d(e,o){try{var r="[builder-combo-item]";r+='[builder-combo-step="'+o+'"]',r+='[builder-combo-sku="'+e+'"]';var t=document.querySelector(r);window.freedom.removeClass(t,"hide"),window.freedom.nsPubSub.pub("builder-combo.after.change",o)}catch(c){console.error("builder-combo.showSelectedItem",c)}}function s(e){try{var o=e.target,r=o.getAttribute(a),t=o.value;u(r),d(t,r)}catch(c){console.error("builder-combo.handleComboChange",c)}}function b(e){try{window.freedom.nsPubSub.pub("builder.builder-combo.changed",e)}catch(o){console.error("builder-combo.notifyChangedEvent",o)}}function l(){try{for(var e=document.querySelectorAll("[builder-combo-select]"),o=e.length;o--;)e[o].addEventListener("change",b)}catch(r){console.error("builder-combo.InitInputListener",r)}}var i="[builder-combo-select]",a="builder-combo-step",m={steps:[],stepOpened:0},p=window.freedom.NsStore;p.subscribe(p.actionTypes.CHANGE_PERSONA_BUILDER,r),window.freedom.live(i,"change",s),window.freedom.nsPubSub.sub("color-flavor-size.changeHtml.before",t),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",c),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",l)}();